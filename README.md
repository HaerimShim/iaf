# ðŸ“¦ IAF - Inbound Advisory Forecasting
> ìž¬ê³  ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì†Œì§„ ì‹œì ì„ ì˜ˆì¸¡í•˜ê³ , OMS ì—°ë™ì„ í†µí•´ ì„ ì œì  ì¶œê³  ìš”ì²­ì„ ìžë™í™”í•˜ëŠ” WMS ìš´ì˜ ì§€ì› ì‹œìŠ¤í…œ

ë³¸ í”„ë¡œì íŠ¸ëŠ” 3PL í’€í•„ë¨¼íŠ¸ í™˜ê²½ì—ì„œ ì¶œê³  íŒ¨í„´ì´ ë¹„êµì  ì•ˆì •ì ì¸ ìƒí•„í’ˆ ë¸Œëžœë“œë¥¼ ê°€ì •í•˜ê³ ,  
ê³ ê°ì‚¬ SKUë³„ ìž…Â·ì¶œê³  ì´ë ¥ê³¼ ìž¬ê³  ë°ì´í„°ë¥¼ ë¶„ì„í•˜ì—¬ ìž¬ê³  ìœ„í—˜ë„ë¥¼ ë¶„ë¥˜í•˜ê³  OMSë¡œ ìžë™ ì—°ë™í•˜ëŠ” ì‹œìŠ¤í…œìž…ë‹ˆë‹¤. 

ìš´ì˜ìžê°€ ìž¬ê³  ë¶€ì¡±ì„ ì‚¬ì „ì— ì¸ì§€í•˜ê³  ëŒ€ì‘í•  ìˆ˜ ìžˆë„ë¡ ë°°ì¹˜ ê¸°ë°˜ ë¶„ì„ê³¼ ì•Œë¦¼ ê¸°ëŠ¥ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

## âœ… ê¸°ìˆ  ìŠ¤íƒ
- Java 17
- Spring Boot 4.0.2
- MyBatis
- JSP
- MariaDB

## âœ… ì£¼ìš” ê¸°ëŠ¥
### 1ï¸âƒ£ ìž¬ê³  ë¶„ì„ ë°°ì¹˜ (02:30)

- ìµœê·¼ 7ì¼ / 28ì¼ ê¸°ì¤€ ì¼í‰ê·  ì¶œê³ ëŸ‰ ë¶„ì„
- ê°€ìš© ìž¬ê³  ê¸°ë°˜ ì˜ˆìƒ ì†Œì§„ì¼ ê³„ì‚°
- ìž¬ê³  ìƒíƒœ ìžë™ ë¶„ë¥˜ (SAFE / WARNING / DANGER)
- ANALYSIS_RESULT í…Œì´ë¸” ì ìž¬
- BATCH_LOG ê¸°ë¡

### 2ï¸âƒ£ OMS ìžë™ ì•Œë¦¼ ë°œì†¡ ë°°ì¹˜ (05:00)
- WARNING / DANGER í•­ëª©ë§Œ ì„ ë³„ ì „ì†¡
- ê³ ê°ì‚¬ë³„ OMS URLë¡œ JSON ì „ì†¡ (Spring RestClient ê¸°ë°˜ HTTP í†µì‹ )
- ë¶„ì„ ë°°ì¹˜ ì •ìƒ ì™„ë£Œ ì‹œì—ë§Œ ì‹¤í–‰
- ë°œì†¡ ê²°ê³¼ ë° payload DB ê¸°ë¡ (OMS_NOTIFICATION)

### 3ï¸âƒ£ ì›¹ í™”ë©´
- ì—…ì²´ë³„ ìž…Â·ì¶œê³  ë¶„ì„ : ê¸°ì¤€/ë¶„ì„ ë°ì´í„° ë° ì¡°ì¹˜ ê²°ê³¼ ì¡°íšŒ
- OMS ì „ì†¡ ì´ë ¥ : ì „ì†¡ ì´ë ¥ ì¡°íšŒ ë° ìž¬ë°œì†¡ ê¸°ëŠ¥
- ë°°ì¹˜ ì‹¤í–‰ ì´ë ¥ : ë°°ì¹˜ ì‹¤í–‰ ê²°ê³¼ ë° ì˜¤ë¥˜ ë©”ì‹œì§€ ê¸°ê°„ë³„ ì¡°íšŒ

### ì›¹ í™”ë©´ ì˜ˆì‹œ
![img_3.png](img_3.png)
![img_4.png](img_4.png)
![img_5.png](img_5.png)

## âœ…ï¸ ê¸°ìˆ ì  ê³ ë ¤ì‚¬í•­
- OMS ì—°ë™ì„ ìœ„í•œ JSON payload êµ¬ì¡° ì„¤ê³„ (baseDate, clientId, SKUë³„ alerts í¬í•¨)
- OMS ë¯¸ì„¤ì • ê³ ê°ì‚¬ ì˜ˆì™¸ ë¶„ê¸° ë° ìƒí™©ë³„ ë¡œê·¸ ë ˆë²¨ êµ¬ë¶„(INFO/WARN/ERROR) ì ìš©
- OMS ë°œì†¡ ë°°ì¹˜ ì‹¤í–‰ ì „ ë¶„ì„ ë°°ì¹˜ ì •ìƒ ì™„ë£Œ ì—¬ë¶€ë¥¼ BATCH_LOG ê¸°ë°˜ìœ¼ë¡œ ê²€ì¦í•˜ì—¬ ë°ì´í„° ì •í•©ì„± í™•ë³´
- ë°œì†¡ ì„±ê³µ/ì‹¤íŒ¨ ì´ë ¥ì„ DBì— ì €ìž¥í•˜ì—¬ ìž¬ë°œì†¡ ë° ìž¥ì•  ì¶”ì  ì§€ì›

## âœ… í–¥í›„ í™•ìž¥ ê³ ë ¤ ì‚¬í•­
- ë¶„ì„ ë°°ì¹˜: í´ë¼ì´ì–¸íŠ¸/SKU ë°ì´í„° ê¸‰ì¦ ì‹œ Spring Batch íŒŒí‹°ì…”ë‹ìœ¼ë¡œ ë³‘ë ¬ ì²˜ë¦¬ ì „í™˜ ê³ ë ¤
- OMS ë°œì†¡: í´ë¼ì´ì–¸íŠ¸ ìˆ˜ ì¦ê°€ ì‹œ Kafka/RabbitMQ ë„ìž…í•´ ìˆœì°¨ ë£¨í”„ë¥¼ ë¹„ë™ê¸° Consumerë¡œ ì „í™˜ ê³ ë ¤
- ìŠ¤ì¼€ì¤„ëŸ¬: ë‹¤ì¤‘ ì„œë²„ í™˜ê²½ì—ì„œ ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€ë¥¼ ìœ„í•´ ShedLock ì ìš© ê³ ë ¤

## âœ… ë°°ì¹˜ í”„ë¡œì„¸ìŠ¤ íë¦„

```mermaid
flowchart TD
    A([02:30 ìž¬ê³  ë¶„ì„ ë°°ì¹˜]) --> B[ìž¬ê³ /ì¶œê³  ì´ë ¥ ì¡°íšŒ]
    B --> C[ì¼í‰ê·  ì¶œê³ ëŸ‰ ê³„ì‚°\n7ì¼ / 28ì¼]
    C --> D{ìž”ì—¬ì¼ìˆ˜}
    D -->|â‰¤ 7ì¼| E[DANGER]
    D -->|â‰¤ 14ì¼| F[WARNING]
    D -->|> 14ì¼| G[SAFE]
    E & F & G --> H[(ANALYSIS_RESULT)]
    H --> I[(BATCH_LOG SUCCESS)]

    K([05:00 OMS ë°œì†¡ ë°°ì¹˜]) --> L{ë¶„ì„ ë°°ì¹˜ SUCCESS?}
    L -->|NO| M[ë°œì†¡ ì¤‘ë‹¨]
    L -->|YES| N[ê³ ê°ì‚¬ ëª©ë¡ ì¡°íšŒ]
    N --> O{OMS URL?}
    O -->|ì—†ìŒ| P[(SKIP)]
    O -->|ìžˆìŒ| Q{WARNING/DANGER?}
    Q -->|ì—†ìŒ| R[ë°œì†¡ ìƒëžµ]
    Q -->|ìžˆìŒ| S[JSON payload êµ¬ì„±]
    S --> T[HTTP POST]
    T -->|ì„±ê³µ| U[(SUCCESS)]
    T -->|ì‹¤íŒ¨| V[(FAIL)]
```

## âœ… ERD
![img_6.png](img_6.png)
 
